@import url('https://unpkg.com/normalize.css') layer(normalize);
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600&family=Cinzel:wght@800&display=swap') layer(base);

@layer base {
  html { color-scheme: light dark; }
  *, *::before, *::after { box-sizing: border-box; }

  body {
    min-height: 100vh;
    display: flex; flex-direction: column; align-items: center; gap: 1rem;
    padding-block: 2rem;
    font-family: 'Noto Sans KR', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;

    /* Mist Horizon (안개 띠 + 수면 광택) */
    background:
      radial-gradient(160% 80% at 50% -20%, #0e2c34 0, transparent 55%),
      linear-gradient(180deg, #07141a 0%, #061018 55%, #02060a 100%);
    color: canvasText;
  }

  h1 {
    margin: 0;
    font-family: 'Cinzel', serif;
    letter-spacing: .6px;
    text-transform: uppercase;
    text-shadow: 0 0 18px rgba(60,180,160,.18);
    font-size: clamp(28px, 6vw, 56px);
  }

  .lead {
    width: 74ch; max-width: calc(100% - 4rem);
    text-align: center; text-wrap: balance;
    font-family: monospace; line-height: 1.5; opacity: .85;
    margin: 0 0 3rem;
  }

  :root {
    --gap: 8px;
    --base: clamp(2rem, 8cqi, 80px);
    --easing: cubic-bezier(.2,.6,.2,1);
    --speed: .6s;
  }

  /* 세로 카드 그리드 */
  ul {
    display: grid; container-type: inline-size;
    grid-template-columns: 10fr 1fr 1fr 1fr 1fr 1fr 1fr;
    gap: var(--gap); list-style: none; margin: 0; padding: 0;
    height: clamp(300px, 40dvh, 474px);
    width: 820px; max-width: calc(100% - 4rem);
    transition: grid-template-columns var(--speed) var(--easing);
    perspective: 900px;
  }

  li {
    position: relative; overflow: hidden; min-width: var(--base);
    border-radius: 10px;
    background: light-dark(#fff, #000);
    border: 1px solid color-mix(in hsl, #6dd3ff, transparent 72%);
    box-shadow: inset 0 0 60px rgba(20,120,120,.06);
    transition: transform .35s var(--easing), box-shadow .35s var(--easing);
  }

  /* 카드 본문 */
  article{
    position: absolute; inset: 0; container-type: size; /* 100cqh = 카드 높이 */
    display: flex; flex-direction: column; justify-content: flex-end; gap: 1rem;
    padding-inline: calc(var(--base) * .5 - 9px);
    padding-bottom: 1rem;
    overflow: hidden;
    font-family: monospace;
  }

  article h3{
    position: absolute; top: 1rem; left: calc(var(--base) * .5);
    transform-origin: 0 50%; rotate: 90deg;
    font-size: 1rem; font-weight: 300; text-transform: uppercase;
    white-space: nowrap; margin: 0;
  }

  article p{ font-size: 13px; line-height: 1.25; opacity: .95; }

  article a{
    position: absolute; bottom: 1rem; color: inherit; text-decoration: none; font-weight: 600;
  }
  article a span{ display: inline-block; translate: calc(var(--base) * .5); }
  article a:hover span{ text-decoration: underline; text-underline-offset: 4px; }

  article img{
    position: absolute; inset: 0; width: 100%; height: 100%;
    object-fit: cover;
    mask: radial-gradient(100% 100% at 100% 0, #fff, #0000);
  }

  /* 기본 가시성/트랜지션 */
  li :is(svg, h3){ opacity: .6; transition: opacity calc(var(--speed) * 1.2) var(--easing); }
  li :is(a, p){ opacity: 0; transition: opacity calc(var(--speed) * 1.2) var(--easing); }
  li img{ filter: grayscale(1) brightness(1.5); scale: 1.1; transition: filter calc(var(--speed) * 1.2), scale calc(var(--speed) * 1.2) var(--easing); }

  [data-active="true"] :is(a, p, h3, svg){ opacity: 1; }
  [data-active="true"] :is(a, p){ transition-delay: .15s; }
  [data-active="true"] img{ filter: grayscale(0) brightness(1); scale: 1; transition-delay: .15s; }
  li[data-active="true"]{
    box-shadow:
      0 0 0 1px rgba(110,210,255,.28),
      0 0 24px rgba(80,200,255,.14),
      inset 0 0 80px rgba(40,160,200,.08);
  }
  li[data-active="true"]:hover{ transform: translateZ(12px) rotateY(-1.6deg); }

  /* 룬 레이어 */
  .runes{
    position: absolute; inset: 6% 5% 12% 5%;
    pointer-events: none; opacity: 0; transition: opacity .35s ease;
    mix-blend-mode: screen; filter: url(#fog) blur(.2px);
  }
  li[data-active="true"] .runes{ opacity: .96; }

  /* 일정 간격 대각선 밴드 */
  @keyframes bandDrift { 0%{ transform: translateX(-2%) rotate(var(--rot)); } 100%{ transform: translateX(2%) rotate(var(--rot)); } }
  @keyframes bandFade  { 0%{ opacity: .9; } 100%{ opacity: .45; } }

  .band{
    position: absolute; left: -25%; width: 150%;
    top: calc(var(--topCqh, 10) * 1cqh);         /* 간격을 cqh로 정확히 배치 */
    height: calc(var(--bandCqh, 9) * 1cqh);      /* 밴드 두께 */
    overflow: hidden;
    transform: rotate(var(--rot, -20deg));
    animation:
      bandDrift var(--drift, 20s) ease-in-out var(--delay, 0s) infinite alternate,
      bandFade  var(--wane,  90s) ease-in-out var(--delay, 0s) infinite alternate;
    will-change: transform, opacity;
  }

  /* 밴드 안의 룬 문자열: 아래로 흐름 */
  @keyframes slideDown { to { transform: translateY(240%); } }
  .line{
    position: absolute; left: 0; right: 0; top: -120%;
    display: flex; justify-content: space-around;
    animation: slideDown var(--speedY, 30s) linear var(--offset, 0s) infinite;
  }
  .line em{
    white-space: nowrap; letter-spacing: .6em;
    color: rgba(140,240,230,.66);
    text-shadow: 0 0 12px rgba(80,200,200,.25), 0 0 22px rgba(50,150,200,.18);
    font-size: clamp(12px, 2.2cqi, 18px);
  }

  /* 모션 최소화 사용자 */
  @media (prefers-reduced-motion: reduce) {
    .band, .line { animation: none !important; }
    li[data-active="true"]:hover { transform: none; }
  }
}

