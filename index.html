<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>the craft of ui</title>
  <style>
  @import url('https://unpkg.com/normalize.css') layer(normalize);

  @layer normalize, base, demo;

  /* -------------------- DEMO (네 스타일 유지 + 수정) -------------------- */
  @layer demo {
    body {
      /* 배경 고정(네가 원한 남청색 톤) + 눈금 제거 */
      background: #0d1a1f;
      color: #e6eef2;

      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      gap: 1rem;
      padding-block: 2rem;
      min-height: 100svh; /* 캔버스 배경과 함께 꽉 채움 */
    }

    h1, p { margin: 0; }

    /* 상단 제목(첫 방문 타이핑 후 보이기) */
    h1.fluid {
      --font-size-min: 22;
      --font-level: 4.25;
      /* pow() 미지원 브라우저 대비 가드 */
      font-size: clamp(28px, 6vw, 56px);

      opacity: 0;
      transition: opacity .35s ease;
    }
    h1.fluid.show { opacity: 1; }

    h3 { white-space: nowrap; margin: 0; }

    /* 상단 설명문 */
    body > p {
      width: 74ch;
      max-width: calc(100% - 4rem);
      text-wrap: balance;
      font-family: monospace;
      margin-bottom: 4rem;
      line-height: 1.5;
      opacity: 0.85;
      font-weight: 400;
    }
    @media (max-width: 768px) {
      body > p { text-align: center; }
    }

    /* 카드 내부 페이드 */
    li :is(svg, h3) {
      opacity: 0.6;
      transition: opacity calc(var(--speed) * 1.2) var(--easing);
    }
    li :is(a, p) {
      opacity: 0;
      transition: opacity calc(var(--speed) * 1.2) var(--easing);
      width: fit-content;
    }
    li img {
      filter: grayscale(1) brightness(1.5);
      scale: 1.1;
      transition-property: filter, scale;
      transition-duration: calc(var(--speed) * 1.2);
      transition-timing-function: var(--easing);
    }
    [data-active='true'] :is(a, p, h3, svg) { opacity: var(--opacity, 1); }
    [data-active='true'] :is(a, p) { transition-delay: calc(var(--speed) * 0.25); }
    [data-active='true'] img {
      filter: grayscale(0) brightness(1);
      scale: 1;
      transition-delay: calc(var(--speed) * 0.25);
    }

    /* 카드 배치/타이포 (네 구조 유지) */
    article {
      width: calc(var(--article-width) * 1px);
      height: 100%;
      position: absolute;
      font-family: monospace;
      top: 0;
      left: 0;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      gap: 1rem;
      padding-inline: calc(var(--base) * 0.5 - 9px);
      padding-bottom: 1rem;
      overflow: hidden;
    }
    article h3 {
      position: absolute;
      top: 1rem;
      left: calc(var(--base) * 0.5);
      transform-origin: 0 50%;
      rotate: 90deg;
      font-size: 1rem;
      font-weight: 300;
      text-transform: uppercase;
      font-family: monospace;
    }
    article svg { width: 18px; fill: none; }

    article p {
      font-size: 13px;
      text-wrap: balance;
      line-height: 1.25;
      --opacity: 0.8;
    }

    article a {
      position: absolute;
      bottom: 1rem;
      height: 18px;
      line-height: 1;
      color: inherit;
    }
    article a:is(:focus-visible, :hover) {
      outline: none;
    }
    article a:is(:focus-visible, :hover) span {
      text-decoration: underline;
      text-underline-offset: 4px;
    }
    article a span {
      display: inline-block;
      line-height: 18px;
      translate: calc(var(--base) * 0.5);
      font-weight: 500;
    }

    article img {
      position: absolute;
      pointer-events: none;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      mask: radial-gradient(100% 100% at 100% 0, #fff, #0000);
    }

    /* 컨테이너/그리드 설정 (네 값 유지) */
    :root {
      --gap: 8px;
      --base: clamp(2rem, 8cqi, 80px);
      --easing: linear(
        0 0%, 0.1538 4.09%, 0.2926 8.29%, 0.4173 12.63%, 0.5282 17.12%,
        0.6255 21.77%, 0.7099 26.61%, 0.782 31.67%, 0.8425 37%,
        0.8887 42.23%, 0.9257 47.79%, 0.9543 53.78%, 0.9752 60.32%,
        0.9883 67.11%, 0.9961 75%, 1 100%
      );
      --speed: 0.6s;
    }

    ul {
      display: grid;
      container-type: inline-size;
      grid-template-columns: 10fr 1fr 1fr 1fr 1fr 1fr 1fr; /* 첫 카드 확장 */
      gap: var(--gap);
      list-style-type: none;
      justify-content: center;
      padding: 0;
      height: clamp(300px, 40dvh, 474px);
      margin: 0;
      width: 820px;
      max-width: calc(100% - 4rem);
      transition: grid-template-columns var(--speed) var(--easing);
    }

    li {
      background: #0f1b20; /* 다크 카드 */
      position: relative;
      overflow: hidden;
      min-width: var(--base);
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,0.12);
    }
  }

  /* -------------------- BASE (fluid 유지, 눈금 제거) -------------------- */
  @layer base {
    :root {
      --font-size-min: 16;
      --font-size-max: 20;
      --font-ratio-min: 1.2;
      --font-ratio-max: 1.33;
      --font-width-min: 375;
      --font-width-max: 1500;
    }

    html { color-scheme: dark; } /* 다크 고정 */

    :where(.fluid) {
      /* 네가 쓰던 fluid 계산식 유지(미지원 브라우저는 위 clamp로 가드됨) */
      --fluid-min: calc(var(--font-size-min) * pow(var(--font-ratio-min), var(--font-level, 0)));
      --fluid-max: calc(var(--font-size-max) * pow(var(--font-ratio-max), var(--font-level, 0)));
      --fluid-preferred: calc((var(--fluid-max) - var(--fluid-min)) / (var(--font-width-max) - var(--font-width-min)));
      --fluid-type: clamp(
        (var(--fluid-min) / 16) * 1rem,
        ((var(--fluid-min) / 16) * 1rem) -
          (((var(--fluid-preferred) * var(--font-width-min)) / 16) * 1rem) +
          (var(--fluid-preferred) * var(--variable-unit, 100vi)),
        (var(--fluid-max) / 16) * 1rem
      );
      font-size: var(--fluid-type);
    }

    *, *:after, *:before { box-sizing: border-box; }

    body {
      display: grid;
      place-items: center;
      min-height: 100vh;
      font-family: 'SF Pro Text','SF Pro Icons','AOS Icons','Helvetica Neue',
        Helvetica, Arial, sans-serif, system-ui;
    }

    /* ❌ 눈금(격자) 배경 완전 제거: body::before 규칙 삭제 */
    /* 곰 링크도 제거(혹시 DOM에 남아 있어도 숨김) */
    .bear-link { display:none !important; }
  }

  /* 배경 캔버스 레이어 */
  #bg-dots{
    position: fixed;
    inset: 0;
    z-index: -1;
    pointer-events: none;
  }
  </style>
</head>
<body>
  <!-- 움직이는 점 배경 -->
  <canvas id="bg-dots" aria-hidden="true"></canvas>

  <!-- ===== 너가 준 HTML 그대로 ===== -->
  <h1 class="fluid">the craft of ui</h1>
  <p>
    Unlock the art and science of interface development. This isn’t just about
    pushing pixels or following documentation — it’s about mastering the
    tools, understanding the nuances, and shaping experiences with intention.
  </p>
  <ul>
    <li data-active="true">
      <article>
        <h3>The Craft</h3>
        <p>
          Gain the confidence to build anything you envision, transforming
          motion, interaction, and design principles into second nature.
        </p>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
             stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M6 3h12l4 6-10 13L2 9Z" />
          <path d="M11 3 8 9l4 13 4-13-3-6" />
          <path d="M2 9h20" />
        </svg>
        <a href="#"><span>Watch now</span></a>
        <img src="https://picsum.photos/720/720?random=12" alt="" />
      </article>
    </li>
    <li>
      <article>
        <h3>CSS Animation</h3>
        <p>
          Master CSS animations from your very first set of @keyframes right
          through to things no one else ever teaches you.
        </p>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect width="18" height="18" x="3" y="3" rx="2" />
          <path d="M7 3v18" />
          <path d="M3 7.5h4" />
          <path d="M3 12h18" />
          <path d="M3 16.5h4" />
          <path d="M17 3v18" />
          <path d="M17 7.5h4" />
          <path d="M17 16.5h4" />
        </svg>
        <a href="#"><span>Watch now</span></a>
        <img src="https://picsum.photos/720/720?random=17" alt="" />
      </article>
    </li>
    <li>
      <article>
        <h3>SVG Filters</h3>
        <p>
          Shaders on a budget. Learn how to use noise to your advantage whilst
          making flames and stickers.
        </p>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" />
        </svg>
        <a href="#"><span>Watch now</span></a>
        <img src="https://picsum.photos/720/720?random=19" alt="" />
      </article>
    </li>
    <li>
      <article>
        <h3>Scroll Animation</h3>
        <p>
          Take your users on a journey with the joy of tasteful scroll
          animation. You might not even need JavaScript.
        </p>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 17V5a2 2 0 0 0-2-2H4" />
          <path
            d="M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"
          />
        </svg>
        <a href="#"><span>Watch now</span></a>
        <img src="https://picsum.photos/720/720?random=42" alt="" />
      </article>
    </li>
    <li>
      <article>
        <h3>Taming Canvas</h3>
        <p>
          Grasp how to tame the pixel playground and when to do so. Whilst
          building with "Performance Driven Development".
        </p>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="13.5" cy="6.5" r=".5" fill="currentColor" />
          <circle cx="17.5" cy="10.5" r=".5" fill="currentColor" />
          <circle cx="8.5" cy="7.5" r=".5" fill="currentColor" />
          <circle cx="6.5" cy="12.5" r=".5" fill="currentColor" />
          <path
            d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"
          />
        </svg>
        <a href="#"><span>Watch now</span></a>
        <img src="https://picsum.photos/720/720?random=128" alt="" />
      </article>
    </li>
    <li>
      <article>
        <h3>Layout Tricks</h3>
        <p>
          Do you really need a library for that? Sometimes stepping back and
          rethinking the problem yields a nifty solution.
        </p>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path
            d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"
          />
          <path d="m14 7 3 3" />
          <path d="M5 6v4" />
          <path d="M19 14v4" />
          <path d="M10 2v2" />
          <path d="M7 8H3" />
          <path d="M21 16h-4" />
          <path d="M11 3H9" />
        </svg>
        <a href="#"><span>Watch now</span></a>
        <img src="https://picsum.photos/720/720?random=56" alt="" />
      </article>
    </li>
    <li>
      <article>
        <h3>Mastering Time</h3>
        <p>
          It's not all just easings and compositions. Time plays a crucial
          part in various UI patterns that might not seem obvious at first.
        </p>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M5 22h14" />
          <path d="M5 2h14" />
          <path
            d="M17 22v-4.172a2 2 0 0 0-.586-1.414L12 12l-4.414 4.414A2 2 0 0 0 7 17.828V22"
          />
          <path
            d="M7 2v4.172a2 2 0 0 0 .586 1.414L12 12l4.414-4.414A2 2 0 0 0 17 6.172V2"
          />
        </svg>
        <a href="#"><span>Watch now</span></a>
        <img src="https://picsum.photos/720/720?random=39" alt="" />
      </article>
    </li>
  </ul>

  <script>
  /* ===== 카드 확장/접힘 (hover/click/focus) — 네 로직 기반 + '벗어나면 접힘' 추가 ===== */
  (() => {
    const list = document.querySelector('ul');
    if (!list) return;
    const items = list.querySelectorAll('li');

    const setIndex = (event) => {
      const closest = event.target.closest('li');
      if (closest) {
        const index = [...items].indexOf(closest);
        const cols = new Array(list.children.length)
          .fill()
          .map((_, i) => {
            items[i].dataset.active = (index === i).toString();
            return index === i ? '10fr' : '1fr';
          })
          .join(' ');
        list.style.setProperty('grid-template-columns', cols);
      }
    };

    list.addEventListener('focus', setIndex, true);
    list.addEventListener('click', setIndex);
    list.addEventListener('pointermove', setIndex);

    // 영역을 벗어나면 자동 접힘
    const collapse = () => {
      [...items].forEach((it) => (it.dataset.active = 'false'));
      list.style.setProperty(
        'grid-template-columns',
        \`repeat(\${list.children.length}, 1fr)\`
      );
    };
    list.addEventListener('pointerleave', collapse);
    list.addEventListener('focusout', (e) => {
      if (!list.contains(e.relatedTarget)) collapse();
    });

    // 원본 로직: article width 동기화
    const resync = () => {
      const w = Math.max(
        ...[...items].map((i) => i.offsetWidth || 0),
        280
      );
      list.style.setProperty('--article-width', w);
    };
    window.addEventListener('resize', resync);
    resync();
  })();

  /* ===== 상단 제목: 첫 방문 1회만 타이핑 ===== */
  (() => {
    const h1 = document.querySelector('h1.fluid');
    if (!h1) return;
    const text = h1.textContent.trim();
    const seen = sessionStorage.getItem('__title_typed__') === '1';
    const reduce = matchMedia?.('(prefers-reduced-motion: reduce)').matches ?? false;

    function show() { h1.classList.add('show'); }
    function typeOnce(speed = 38) {
      h1.textContent = '';
      show();
      let i = 0;
      const id = setInterval(() => {
        if (i >= text.length) {
          clearInterval(id);
          sessionStorage.setItem('__title_typed__', '1');
          return;
        }
        h1.append(text[i++]);
      }, speed);
    }

    if (reduce || seen) { h1.textContent = text; show(); }
    else { typeOnce(); }
  })();

  /* ===== 배경: 은은하게 움직이는 점(Canvas) ===== */
  (() => {
    const cvs = document.getElementById('bg-dots');
    if (!cvs) return;
    const ctx = cvs.getContext('2d', { alpha: true });

    let W=0, H=0, DPR=1, pts=[], last=0, raf=0;
    const OPT = {
      density: 0.00007, /* 화면 면적당 점 수 */
      min: 70, max: 160,        /* 점 개수 클램프 */
      r: [0.7, 2.4],            /* 반지름(px) */
      v: [3, 12],               /* 속도(px/s) */
      a: [0.05, 0.18],          /* 불투명도 */
      hz:[.10, .25],            /* 맥동 주파수 */
      blur: 6                   /* 그림자 블러 */
    };
    const reduce = matchMedia?.('(prefers-reduced-motion: reduce)').matches ?? false;
    const rnd = (a,b)=> a + Math.random()*(b-a);

    function resize(){
      DPR = Math.min(2, devicePixelRatio || 1);
      W = cvs.width  = Math.floor(innerWidth  * DPR);
      H = cvs.height = Math.floor(innerHeight * DPR);
      cvs.style.width  = innerWidth + 'px';
      cvs.style.height = innerHeight + 'px';
      spawn();
    }
    function spawn(){
      const area = innerWidth * innerHeight;
      const n = Math.max(OPT.min, Math.min(OPT.max, Math.round(area * OPT.density)));
      pts = Array.from({length:n}, () => {
        const r  = rnd(...OPT.r) * DPR;
        const sp = rnd(...OPT.v) * DPR;
        const a  = Math.random() * Math.PI * 2;
        return {
          x: Math.random()*W, y: Math.random()*H, r,
          vx: Math.cos(a)*sp, vy: Math.sin(a)*sp,
          h: 200 + Math.random()*20, s: 28 + Math.random()*18, l: 76 + Math.random()*8,
          alpha: rnd(...OPT.a),
          ph: Math.random()*Math.PI*2,
          f: rnd(...OPT.hz)*2*Math.PI
        };
      });
    }
    function frame(t){
      const dt = Math.min(.05, (t-(last||t))/1000); last = t;
      ctx.clearRect(0,0,W,H);
      ctx.globalCompositeOperation = 'lighter';
      for (const p of pts){
        p.ph += p.f * dt;
        const tw = .5 + .5*Math.sin(p.ph);
        const al = p.alpha * (.7 + .3*tw);
        ctx.shadowColor = \`hsla(\${p.h} \${p.s}% \${p.l}% / \${al*1.3})\`;
        ctx.shadowBlur  = OPT.blur * DPR;
        ctx.fillStyle   = \`hsla(\${p.h} \${p.s}% \${p.l}% / \${al})\`;
        ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();

        p.x += p.vx*dt; p.y += p.vy*dt;
        if (p.x < -5) p.x = W+5; else if (p.x > W+5) p.x = -5;
        if (p.y < -5) p.y = H+5; else if (p.y > H+5) p.y = -5;
      }
      raf = requestAnimationFrame(frame);
    }
    function start(){
      cancelAnimationFrame(raf);
      resize();
      if (reduce) { ctx.clearRect(0,0,W,H); return; }
      raf = requestAnimationFrame(frame);
    }
    addEventListener('resize', resize);
    start();
  })();
  </script>
</body>
</html>
