<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>3D Book with Long Ribbon</title>
<style>
/* ===== 기본 무대 ===== */
:root{
  /* 커버/리본 기본값 (필요시 인라인 style로 덮어쓰기 가능) */
  --cover-image: url('/assets/covers/_placeholder.jpg');
  --ribbon-color: #e63746;
  --ribbon-w: 22px;   /* 리본 너비 */
  --ribbon-l: 78%;    /* 리본 길이(책 높이에 대한 %) */
}

*{box-sizing:border-box}
html,body{height:100%}
body {
  width: 100%;
  height: 100vh;
  display: flex;
  gap: 40px;
  justify-content: center;
  align-items: center;
  perspective: 1200px;
  background: #ccc;
  margin: 0;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial;
}

/* ===== 네가 준 구조 그대로 ===== */
.book {
  transform-style: preserve-3d;
  position: relative;
  height: 300px;
  cursor: pointer;
  backface-visibility: visible;
}

/* 공통 레이어 */
.front, .back, .page1, .page2, .page3, .page4, .page5, .page6 {
  transform-style: preserve-3d;
  position: absolute;
  width: 200px;
  height: 100%;
  top: 0; left: 0;
  transform-origin: left center;
  transition: transform .5s ease-in-out, box-shadow .35s ease-in-out;
}

/* ===== 표지/뒷표지 ===== */
/* 뒷표지는 단색 */
.back {
  background: navy;
  border-bottom-right-radius: .5em;
  border-top-right-radius: .5em;
}

/* 앞표지는 이미지 + 비네트 + 폴백색(네이비) */
.front {
  background-color: navy; /* 커버 없을 때 폴백 */
  background-image:
    linear-gradient(180deg, rgba(0,0,0,.0), rgba(0,0,0,.18)),
    var(--cover-image);
  background-size: cover;
  background-position: center;
  border-bottom-right-radius: .5em;
  border-top-right-radius: .5em;
  /* === 긴 책갈피 리본 === */
}
.front::after{
  content:"";
  position:absolute; top:-2px; right:12px;
  width: var(--ribbon-w);
  height: var(--ribbon-l);
  background:
    linear-gradient(0deg,
      rgba(255,255,255,.18),
      rgba(255,255,255,0) 18%),
    var(--ribbon-color);
  /* 아래쪽이 V자 모양으로 파이면서 실제 책갈피 느낌 */
  clip-path: polygon(0 0,100% 0,100% calc(100% - 18px),50% 100%,0 calc(100% - 18px));
  filter: drop-shadow(0 2px 2px rgba(0,0,0,.35));
  border-radius: 4px 4px 0 0;
  pointer-events:none;
  /* 표지 열릴 때 같이 움직이도록 .front에 붙여둠 */
}

/* ===== 페이지 컬러(네 값 유지) ===== */
.page1 { background: #efefef; }
.page2 { background: #efefef; }
.page3 { background: #f5f5f5; }
.page4 { background: #f5f5f5; }
.page5 { background: #fafafa; }
.page6 { background: #fdfdfd; }

/* 공통 모서리(네 논리 유지) */
.front, .page1, .page3, .page5 {
  border-bottom-right-radius: .5em;
  border-top-right-radius: .5em;
}
.back, .page2, .page4, .page6 {
  border-bottom-right-radius: .5em;
  border-top-right-radius: .5em;
}

/* ===== 펼침 효과(네 각도값 그대로) ===== */
.book:hover .front {
  transform: rotateY(-160deg) scale(1.1);
  box-shadow: 0 1em 3em 0 rgba(0, 0, 0, .2);
}
.book:hover .page1 {
  transform: rotateY(-150deg) scale(1.1);
  box-shadow: 0 1em 3em 0 rgba(0, 0, 0, .2);
}
.book:hover .page2 {
  transform: rotateY(-30deg) scale(1.1);
  box-shadow: 0 1em 3em 0 rgba(0, 0, 0, .2);
}
.book:hover .page3 {
  transform: rotateY(-140deg) scale(1.1);
  box-shadow: 0 1em 3em 0 rgba(0, 0, 0, .2);
}
.book:hover .page4 {
  transform: rotateY(-40deg) scale(1.1);
  box-shadow: 0 1em 3em 0 rgba(0, 0, 0, .2);
}
.book:hover .page5 {
  transform: rotateY(-130deg) scale(1.1);
  box-shadow: 0 1em 3em 0 rgba(0, 0, 0, .2);
}
.book:hover .page6 {
  transform: rotateY(-50deg) scale(1.1);
  box-shadow: 0 1em 3em 0 rgba(0, 0, 0, .2);
}
.book:hover .back {
  transform: rotateY(-20deg) scale(1.1);
}

/* ===== (선택) 모션 감소 존중 ===== */
@media (prefers-reduced-motion: reduce){
  .book *{ transition:none !important }
}
</style>
</head>
<body>

<!-- data-cover 로 이미지 교체하는 예시 -->
<div class="book" data-cover="/assets/covers/example-1.jpg" style="--ribbon-l:88%; --ribbon-w:26px; --ribbon-color:#d72d4f">
  <div class="back"></div>
  <div class="page6"></div>
  <div class="page5"></div>
  <div class="page4"></div>
  <div class="page3"></div>
  <div class="page2"></div>
  <div class="page1"></div>
  <div class="front"></div>
</div>

<!-- 인라인 CSS 변수로 교체하는 예시 -->
<div class="book" style="--cover-image:url('https://picsum.photos/seed/book/600/900'); --ribbon-l:75%; --ribbon-w:24px; --ribbon-color:#7b3cff">
  <div class="back"></div>
  <div class="page6"></div>
  <div class="page5"></div>
  <div class="page4"></div>
  <div class="page3"></div>
  <div class="page2"></div>
  <div class="page1"></div>
  <div class="front"></div>
</div>

<script>
/* data-cover / data-ribbon-* 로 쉽게 바꾸기 */
document.querySelectorAll('.book').forEach(book=>{
  const cover = book.dataset.cover;
  if (cover) book.style.setProperty('--cover-image', `url("${cover}")`);

  if (book.dataset.ribbonColor) book.style.setProperty('--ribbon-color', book.dataset.ribbonColor);
  if (book.dataset.ribbonW)     book.style.setProperty('--ribbon-w', book.dataset.ribbonW);
  if (book.dataset.ribbonL)     book.style.setProperty('--ribbon-l', book.dataset.ribbonL);
});
</script>
</body>
</html>
